<!DOCTYPE html>
<html>
<head>
    <title>Candidate Page</title>
</head>
<body>
    <h2>Welcome, {{ username }} (Candidate)</h2>

    <!-- Flash messages for upload/delete success -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for msg in messages %}
          <p style="color: green;">{{ msg }}</p>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <h3>Upload Your CV</h3>
    <form method="POST" enctype="multipart/form-data">
        <input type="file" name="cv_file" required>
        <button type="submit">Upload</button>
    </form>

    <h3>Find Matching Jobs</h3>
    <form action="{{ url_for('match_jobs') }}" method="GET">
        <button type="submit">Find Matching Jobs</button>
    </form>

    <h3>Your Uploaded CVs</h3>
    {% if cvs %}
        <ul>
            {% for cv in cvs %}
                <li>
                    {{ cv.filename }} (Uploaded on {{ cv.upload_date.strftime('%Y-%m-%d %H:%M') }})
                    <form action="{{ url_for('delete_cv', cv_id=cv.id) }}" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this CV?');">Delete</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No CV uploaded yet.</p>
    {% endif %}
</body>
</html>
